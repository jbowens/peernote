{% extends 'base/application_editor.html' %}

{% block styles %}
    {{ super() }}
    {% assets "editor_css" %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" />
    {% endassets %}
{% endblock %}

{% block scripts %}
    {{ super() }}

    <script>
        var peernoteNS = peernoteNS || {};
        peernoteNS.essays = peernoteNS.essays || {};
        peernoteNS.essays.uid = {{ current_essay.uid }};
        peernoteNS.essays.did = {{ current_draft.did }};

        peernoteNS.essays.drafts = [];
        {% for draft in current_essay.get_all_drafts() %}
            peernoteNS.essays.drafts.push({{draft.did}});
        {% endfor %}
    </script>

    {% assets "editor_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}

{% block content %}

{# Popup Light Box #}
<div id="send-review-shadow">
    <div class="send-review-center-align">
        <div class="send-review-pane">
            <i class="fa fa-times"></i>
            <h3>Send a review</h3>
            <div>Let your friend review your essay </div>
            <form>
                <input type="text" name="email" placeholder="Email Address" class="send-review-pane-email">
                <input type="submit" value="SEND REVIEW" class="send-review-pane-submit">

                <span class="email-confirmation-popup">Thank you! An email has been sent.</span>
            </form>
        </div>
    </div>
</div>

<div class="editor-background">
    <div class="tools">
        {# Left toolkit #}
        <div class="toolkit">
            <div class="toolkit-left">
                <div class="toolkit-region toolkit-region-light draft-number">
                    <span class="draft-number">Draft: 1</span> 
                    <span class="mode"> Mode: Editor</span>
                </div>
                <div class="toolkit-region toolkit-region-dark">
                    <h2>DOC MANAGER</h2>
                    <ul>
                        <li>
                            <i class="fa fa-plus"></i> New Document
                        </li>
                        <li>
                            <i class="fa fa-folder-open"></i> Open
                        </li>
                        <li>
                            <i class="fa fa-trash-o"></i> Delete Document
                        </li>
                        <li>
                            <i class="fa fa-print"></i> Print
                        </li>
                    </ul>
                </div>
                <div class="toolkit-region toolkit-region-light reviewer-button">
                    <h2>REVIEW MODE <i class="fa fa-arrow-right"></i></h2>
                </div>
                <div class="toolkit-region toolkit-region-light">
                    <h2> TOOLKIT<h2>
                    <i class="fa fa-bold"></i>
                    <i class="fa fa-italic"></i>
                    <i class="fa fa-underline"></i>
                </div>
                <div class="toolkit-region toolkit-region-light">
                    <h2>REQUEST REVIEW</h2>
                    <a id="review" class="reviewify">Reviewify</a>
                </div>
            </div>
            <div class="toolkit-right">
                <div class="toolkit-region toolkit-region-light draft-number">
                    <span class="draft-number">Draft: 1</span> 
                    <span class="mode"> Mode: Reviewer</span>
                </div>
                <div class="toolkit-region toolkit-region-dark">
                    <h2>DOC MANAGER</h2>
                    <ul>
                        <li>
                            <i class="fa fa-plus"></i> New Document
                        </li>
                        <li>
                            <i class="fa fa-folder-open"></i> Open
                        </li>
                        <li>
                            <i class="fa fa-trash-o"></i> Delete Document
                        </li>
                        <li>
                            <i class="fa fa-print"></i> Print
                        </li>
                    </ul>
                </div>
                <div class="toolkit-region toolkit-region-light reviewer-button">
                    <h2><i class="fa fa-arrow-left"></i>EDIT MODE </h2>
                </div>
                <div class="toolkit-region toolkit-region-light">
                    <h2>TOOLKIT</h2>
                    <i class="fa fa-strikethrough"></i>
                    <i class="fa fa-comment"></i>
                </div>
            </div>




        </div>
        <div class="main-panel-push"> </div>{# expand this to push the main panel right #}
        <div class="main-panel">
            {# Top tool bar #}
            <div class="buttons buttons-position-absolute">
                <div class="toolkit-open-button"><i class="fa fa-bars"></i></div>                
                <div class="buttons-container">
                    <div class="btn-set">
                        <button class="btn-editor" data-tag="undo" id="undo" title="Undo">
                            <i class="fa fa-reply"></i>
                        </button>
                        <button class="btn-editor" data-tag="redo" id="redo" title="Redo">
                            <i class="fa fa-share"></i>
                        </button>
                    </div>
                    <div class="btn-set">
                        <div class="zoom-dropdown zoom-click">
                            <div class="curr-zoom zoom-click" data-tag="zoom">
                                100%
                                <i class="fa fa-caret-down zoom-click"></i>
                            </div>
                            <ul class="zoom zoom-click" style="display: none;">
                                <li class="zoom-size zoom-click" scale="0.5">50%</li>
                                <li class="zoom-size zoom-click" scale="0.75">75%</li>
                                <li class="zoom-size zoom-click" scale="1">100%</li>
                                <li class="zoom-size zoom-click" scale="1.25">125%</li>
                                <li class="zoom-size zoom-click" s="" cale="1.5">150%</li>
                            </ul>
                          </div>
                    </div>
                    <div class="btn-set">
                        <div class="line-height-dropdown line-height-click">
                            <div class="line-height-btn line-height-click" data-tag="line-height">
                                <i class="fa fa-align-justify combine-icon line-height-click"></i>
                                <i class="fa fa-arrows-v line-height-click"></i>
                                <i class="fa fa-caret-down line-height-click"></i>
                            </div>
                            <ul class="spacing line-height-click" style="display: none;">
                                <li class="line-height line-height-click" scale="1">Single</li>
                                <li class="line-height line-height-click" scale="1.5">1.5</li>
                                <li class="line-height line-height-click" scale="2">Double</li>
                            </ul>
                        </div>
                    </div>
                    <div class="btn-set">
                        <button class="btn-editor" title="Strike-through highlighted text">
                            <i class="fa fa-bold"></i>
                        </button>
                        <button class="btn-editor"  title="Comment on highlighted text">
                            <i class="fa fa-italic"></i>
                        </button>
                        <button class="btn-editor" title="Comment on highlighted text">
                            <i class="fa fa-underline"></i>
                        </button>
                    </div>
                    <div class="btn-set">
                        <button class="btn-editor" data-tag="help" id="help-button" title="Help">
                            <i class="fa fa-question"></i>
                        </button>
                    </div>

                    <div class="status-line"></div>
                </div>
            </div>

            {# #}
            <div class="page-container">
                <div class="page content" contenteditable="true" spellcheck="false">
                    <h1 id="essay-title" class=essay-title>{{ current_draft.title|escape }}</h1>
                    <p id="text-container">{{ current_draft.text }}</p>
                </div>
            </div>

        </div>
        <div class="timeline">
            <h2>Essay Timeline</h2>
            <ul>
                {% for draft in current_essay.get_all_drafts() %}
                    <li><a> Draft {{ draft.version }} </a></li>
                {% endfor %}
            </ul>
        </div>

    </div>

</div>

{% endblock %}
