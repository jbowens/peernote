{% extends 'base/application.html' %}

{% block styles %}
    {{ super() }}
    {% assets "essays_css" %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" />
    {% endassets %}
{% endblock %}

{% block scripts %}
    {{ super() }}

    {% if current_essay %}
        <script>
            var peernoteNS = peernoteNS || {};
            peernoteNS.essays = peernoteNS.essays || {};
            peernoteNS.essays.eid = {{ current_essay.eid }};
        </script>
    {% endif %}

    <script src="/static/js/essays/editor.js"></script>
{% endblock %}

{% block content %}
<div class="editor-background">
    <div class="center-container">
        <div class="status-line"></div>
        <div class="page-container">
            <div class="content" contenteditable="true", spellcheck="false">
                <h1 id="essay-title" class=essay-title>{% if current_essay %}{{ current_essay.title|escape }}{% else %}Title here{% endif %}</h1>
                {% if current_essay %}
                    {% with paras = current_essay.get_paragraphs() %}
                      {% if paras %}
                        {% for p in paras %}
                        <p class="essay-text">{{ p }}</p>
                        {% endfor %}
                      {% else %}
                        <p class="essay-text"></p>
                      {% endif %}
                    {% endwith %}
                {% else %}
                  <p class="essay-text">Once upon a time...</p>
                {% endif %}
            </div>
        </div>
    </div>

</div>


{% endblock %}
