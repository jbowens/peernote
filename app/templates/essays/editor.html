{% extends 'base/application_editor.html' %}

{% block styles %}
    {{ super() }}
    {% assets "editor_css" %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}" />
    {% endassets %}
{% endblock %}

{% block scripts %}
    {{ super() }}

    {% assets "editor_js" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}

    <script>
        peernoteNS.essays.uid = {{ current_essay.uid }};
        peernoteNS.essays.did = {{ current_draft.did }};
        peernoteNS.essays.drafts = [];
        {% for draft in current_essay.get_all_drafts() %}
            peernoteNS.essays.drafts.push({{draft.did}});
        {% endfor %}
    </script>
{% endblock %}

{% block content %}

{# Popup Light Box #}
<div id="send-review-shadow">
    <div class="send-review-center-align">
        <div class="send-review-pane">
            <i class="fa fa-times"></i>
            <h3>Send a review</h3>
            <div>Let your friend review this draft of your essay</div>
            <form>
                <input type="text" name="email" placeholder="Email Address" class="send-review-pane-email">
                <input type="submit" value="SEND REVIEW" class="send-review-pane-submit">

                <span class="email-confirmation-popup">Thank you! An email has been sent.</span>
            </form>
        </div>
    </div>
</div>

<div class="essays-list-shadow">
    <div class="essays-list-center-align">
        <div class="essays-list-container">
            <h1> Your Essays </h1>
            <div class="essays-selector"></div>
        </div>
    </div>
</div>

<div class="editor-background">
    <div class="tools">
        {# Left toolkit #}
        <div class="toolkit">
            <div class="toolkit-left">
                <div class="toolkit-region toolkit-region-light draft-num-row">
                    <div class="draft-num-container">
                        <span class="draft-number">DRAFT: 1</span> 
                        <span class="mode edit-mode edit-mode"> Mode: Editor</span>
                    </div>
                </div>
                <div class="toolkit-region toolkit-region-dark">
                    <h2>DOC MANAGER</h2>
                    <ul>
                        <li class="new">
                        <a href="{{ url_for('essays.create_essay') }}" target="_blank" >
                            <i class="fa fa-plus"></i> 
                            New Document
                        </a>
                        </li>
                        <li class="open">
                        <i class="fa fa-folder-open folder-button"></i> Open
                        </li>
                        <li class="next-draft">
                        <i class="fa fa-archive"></i> Next Draft
                        </li>
                        <li class="print">
                        <a href="{{ url_for('essays.print_essay', essayid=current_essay.eid) }}" target="_blank">
                            <i class="fa fa-print"></i>Print
                        </a>
                        </li>
                    </ul>
                </div>
                <div class="toolkit-region toolkit-region-light reviewer-button">
                    <h2>REVIEW MODE <i class="fa fa-arrow-right"></i></h2>
                </div>
                <div class="toolkit-region toolkit-region-light">
                    <h2 id="review">REQUEST REVIEW</h2>
                </div>
                <div class="toolkit-region toolkit-region-light timeline">
                    <h2><i class="fa fa-clock-o"></i>Draft History</h2>
                    <ul>
                        {% for draft in current_essay.get_all_drafts() %}
                        <li><a> Draft {{ draft.version }} </a></li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="toolkit-right">
            </div>
        </div>
        <div class="main-panel-push"> </div>{# expand this to push the main panel right #}
        <div class="comment-panel-push"></div>
        <div class="comment-panel">
            <div class=" comments-panel-tab comment-tab-line-comments tab-container-selected">
                <div class="tab-top tab-top-comments tab-selected">Comments</div>
                <div class="tab-content">
                    <div class="comments-buttons">
                        <div class="comments-nav">
                            <div class="comments-title comments-index-title">All Comments</div>
                            <div class="comments-title comments-new-title">New Comment</div>
                            <div class="comments-button all-comments-button">All Comments</div>
                            <div class="comments-button">
                                <i class="fa fa-caret-left"></i>
                                Prev
                            </div>
                            <div class="comments-button">
                                Next
                                <i class="fa fa-caret-right caret-right"></i>
                            </div>
                        </div>
                        <div class="comments-button cancel-comment">Cancel</div>
                        <div class="comments-button new-comment">New</div>
                    </div>
                    <div class="comment-post">
                        <div class="tab-explanation">Select a region of text and leave a comment.</div>
                        <textarea class="comment-textarea" rows="7" cols="30" placeholder="Comment"></textarea>
                        <div class="comment-submit" >Comment</div>
                    </div>
                    <div class="comment-thread">
                        <h3>This is the highlighted text for this comment thread</h3>
                        <ul>
                            <li>Comments in the thread here</li> 
                        </ul>
                    </div>
                    <div class="comments-index">
                        <ul>
                            <li>
                                <div class="comment-clickable">
                                    <h3>This is the highlighted text</h3>
                                    <div class="comment-count comments-button">2</div>
                                </div>
                                <div class="comment-details">
                                    <img class="comment-poster-img">
                                    <div class="comment-poster-name">Bryce Aebi | Updated 7 hours ago</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="comment-post-v2-closed">
                        <textarea class="comment-textarea" rows="7" cols="30" placeholder="Comment"></textarea>
                    </div>
                    <div class="comment-post-v2-open"></div>
                </div>
            </div>
            <div class="comments-panel-tab comment-tab-notes">
                <div class="tab-top tab-top-notes tab-unselected">Notepad</div>
                <div class="tab-content tab-notes">
                    <div class="tab-explanation" contenteditable="true" spellcheck="false">Leave general notes here.</div>
                </div>
            </div>
        </div>
        <div class="main-panel">
            {# Top tool bar #}
            <div class="buttons buttons-position-absolute">
                <div class="toolbar">
                    <div class="toolkit-open-button">
                        <i class="fa fa-bars"></i>
                    </div>                
                    <div class="toolkit-comment-button">
                        <i class="fa fa-comment"></i>
                    </div>                
                    <div class="buttons-container">
                        <div class="btn-set">
                            <button class="btn-editor" data-tag="undo" id="undo" title="Undo">
                                <i class="fa fa-reply"></i>
                            </button>
                            <button class="btn-editor" data-tag="redo" id="redo" title="Redo">
                                <i class="fa fa-share"></i>
                            </button>
                        </div>
                        <div class="btn-set">
                            <div class="zoom-dropdown zoom-click">
                                <div class="curr-zoom zoom-click" data-tag="zoom">
                                    100%
                                    <i class="fa fa-caret-down zoom-click"></i>
                                </div>
                                <ul class="zoom zoom-click" style="display: none;">
                                    <li class="zoom-size zoom-click" scale="0.5">50%</li>
                                    <li class="zoom-size zoom-click" scale="0.75">75%</li>
                                    <li class="zoom-size zoom-click" scale="1">100%</li>
                                    <li class="zoom-size zoom-click" scale="1.25">125%</li>
                                    <li class="zoom-size zoom-click" s="" cale="1.5">150%</li>
                                </ul>
                              </div>
                        </div>
                        <div class="btn-set">
                            <div class="line-height-dropdown line-height-click">
                                <div class="line-height-btn line-height-click" data-tag="line-height">
                                    <i class="fa fa-align-justify combine-icon line-height-click"></i>
                                    <i class="fa fa-arrows-v line-height-click"></i>
                                    <i class="fa fa-caret-down line-height-click"></i>
                                </div>
                                <ul class="spacing line-height-click" style="display: none;">
                                    <li class="line-height line-height-click" scale="1">Single</li>
                                    <li class="line-height line-height-click" scale="1.5">1.5</li>
                                    <li class="line-height line-height-click" scale="2">Double</li>
                                </ul>
                            </div>
                        </div>
                        <div class="btn-set">
                            <button class="btn-editor bold" title="Bold highlighted text">
                                <i class="fa fa-bold"></i>
                            </button>
                            <button class="btn-editor italic"  title="Italicize highlighted text">
                                <i class="fa fa-italic"></i>
                            </button>
                            <button class="btn-editor underline" title="Underline highlighted text">
                                <i class="fa fa-underline"></i>
                            </button>
                        </div>
                        <div class="btn-set btn-set-status">
                            <i class="status-line btn-editor">Saved</i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="page-container">
              <div class="page content" contenteditable="true" spellcheck="false"></div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
